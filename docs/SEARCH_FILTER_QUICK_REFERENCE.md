# Search & Filter Quick Reference Guide

## UI Components Overview

### Search Results Screen
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Rechercher                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” Pneus              âœ•      ğŸ¤    â”‚
â”‚                                     â”‚
â”‚  [Tout] [Filtres â–¼] [Trier par â–¼] â”‚
â”‚                                     â”‚
â”‚  RÃ©sultats (64 RÃ©sultats)      âŠ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ–¼ï¸  Product Name             â”‚  â”‚
â”‚  â”‚     Pneu hiver               â”‚  â”‚
â”‚  â”‚     59 000 F    [Ajouter]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ–¼ï¸  Product Name             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Filter Modal (Bottom Sheet)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               â”â”â”                   â”‚
â”‚  Filtres                       âœ•    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Marques                            â”‚
â”‚  [Michelin] [Hankook] [Continental] â”‚
â”‚  [GoodYear] [Bridgestone] [Maxxis]  â”‚
â”‚                                     â”‚
â”‚  Types de vÃ©hicules                 â”‚
â”‚  [Auto] [4X4/SUV] [Camion lÃ©ger]    â”‚
â”‚  [Camion] [Moto/Scooter]            â”‚
â”‚                                     â”‚
â”‚  Types de pneus                     â”‚
â”‚  [Toutes saisons] [Pneus Ã©tÃ©]       â”‚
â”‚  [Pneus hiver]                      â”‚
â”‚                                     â”‚
â”‚  Dimensions                         â”‚
â”‚  [Largeurâ–¼] [Hauteurâ–¼] [DiamÃ¨treâ–¼] â”‚
â”‚                                     â”‚
â”‚  Fourchette de prix                 â”‚
â”‚  â—¯â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—         â”‚
â”‚  0 F                    1,000,000 F â”‚
â”‚                                     â”‚
â”‚  â—¯ En stock uniquement              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     [Valider (3)]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sort Modal (Bottom Sheet)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Options de tri              âœ•      â”‚
â”‚  Trier par                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â—‰ Pertinence                       â”‚
â”‚  â—‹ Prix croissant                   â”‚
â”‚  â—‹ Prix dÃ©croissant                 â”‚
â”‚  â—‹ PopularitÃ©                       â”‚
â”‚  â—‹ Meilleures notes                 â”‚
â”‚  â—‹ NouveautÃ©s                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     [Valider]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key User Flows

### 1. Basic Search Flow
```
Catalog Screen
    â†“ (tap search bar)
Search Results Screen (empty search)
    â†“ (type query)
Debounced suggestions appear
    â†“ (select suggestion or press enter)
Filtered results displayed
```

### 2. Filter Application Flow
```
Search Results Screen
    â†“ (tap "Filtres" button)
Filter Modal opens
    â†“ (select filters)
Active filter count updates
    â†“ (tap "Valider")
Results filtered immediately
Badge shows active filter count
```

### 3. Sort Flow
```
Search Results Screen
    â†“ (tap "Trier par" button)
Sort Modal opens
    â†“ (select sort option)
Radio button updates
    â†“ (tap "Valider")
Results re-sorted immediately
```

## Component Props

### FilterOptions
```dart
FilterOptions(
  sortBy: SortOption.relevance,
  minPrice: 0,
  maxPrice: 1000000,
  selectedBrands: ['Michelin', 'Continental'],
  selectedVehicleTypes: [VehicleType.auto],
  selectedTireTypes: [TireType.allSeason],
  width: '205',
  height: '55',
  diameter: '16',
  inStockOnly: true,
  condition: ProductCondition.new_,
)
```

### ModernFilterModal
```dart
ModernFilterModal.show(
  context: context,
  initialOptions: FilterOptions(),
  availableBrands: ['Michelin', 'Continental'],
  availableCategories: ['Pneus', 'Freinage'],
)
```

### ModernSortModal
```dart
ModernSortModal.show(
  context: context,
  currentSort: SortOption.priceAscending,
)
```

### Debouncer
```dart
final debouncer = Debouncer(
  delay: Duration(milliseconds: 300),
);

debouncer(() {
  performSearch(query);
});

debouncer.dispose(); // In dispose()
```

## Color Scheme

```dart
Primary Action: Colors.black
Secondary Action: Colors.white
Border/Outline: Colors.grey[300]
Background: Colors.grey[100]
Text Primary: Colors.black
Text Secondary: Colors.grey[600]
Active Indicator: Colors.black
Chip Selected: Colors.black (background)
Chip Selected Text: Colors.white
```

## Common Patterns

### Opening a Modal
```dart
final result = await ModernFilterModal.show(
  context: context,
  initialOptions: _filterOptions,
);

if (result != null) {
  setState(() {
    _filterOptions = result;
  });
  _applyFilters();
}
```

### Updating Filter State
```dart
setState(() {
  _filterOptions = _filterOptions.copyWith(
    selectedBrands: ['Michelin'],
    inStockOnly: true,
  );
});
_applyFilters();
```

### Applying Filters to List
```dart
void _applyFilters() {
  setState(() {
    _filteredProducts = _allProducts.where((product) {
      // Price filter
      if (product['price'] < _filterOptions.minPrice ||
          product['price'] > _filterOptions.maxPrice) {
        return false;
      }
      
      // Stock filter
      if (_filterOptions.inStockOnly && !product['inStock']) {
        return false;
      }
      
      // Category filter
      if (_filterOptions.selectedCategories.isNotEmpty &&
          !_filterOptions.selectedCategories.contains(product['category'])) {
        return false;
      }
      
      return true;
    }).toList();
    
    _applySorting();
  });
}
```

### Applying Sort
```dart
void _applySorting() {
  setState(() {
    switch (_filterOptions.sortBy) {
      case SortOption.priceAscending:
        _filteredProducts.sort((a, b) => 
          a['price'].compareTo(b['price']));
        break;
      case SortOption.priceDescending:
        _filteredProducts.sort((a, b) => 
          b['price'].compareTo(a['price']));
        break;
      case SortOption.rating:
        _filteredProducts.sort((a, b) => 
          b['rating'].compareTo(a['rating']));
        break;
      // ... other cases
    }
  });
}
```

## Tips & Tricks

1. **Always use debouncing for search inputs** (300-500ms is optimal)
2. **Show active filter count** to help users know what's applied
3. **Provide clear "Clear All" option** for easy filter reset
4. **Use FilterChip for multi-select**, Radio for single-select
5. **Make modals draggable** for better UX
6. **Show loading states** during async operations
7. **Preserve scroll position** when returning from detail screens
8. **Consider filter persistence** across sessions
9. **Add filter presets** for common use cases
10. **Track filter analytics** to understand user behavior

## Performance Notes

- Debouncing reduces state updates by ~90%
- Filter application is O(n) - scales linearly
- Modal widgets are only built when shown
- Proper disposal prevents memory leaks
- Immutable state prevents unnecessary rebuilds
